{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/monitoring-traffic-of-ios-apps/","result":{"data":{"markdownRemark":{"id":"47433352-6c1e-5256-a375-bdfde7406059","html":"<h2 id=\"introduction\" style=\"position:relative;\"><a href=\"#introduction\" aria-label=\"introduction permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Introduction</h2>\n<p>After reading a few days ago about <a href=\"https://www.vice.com/en_us/article/k7e599/zoom-ios-app-sends-data-to-facebook-even-if-you-dont-have-a-facebook-account\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Zoom sending data to facebook</a>, I was not shocked at all. While I was using <a href=\"https://mitmproxy.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">mitmproxy</a> to log the traffic of my iPhone for my last <a href=\"/posts/tracking-electric-scooters-in-lisbon/\">project</a>, it was obvious that many apps send analytics data to the Facebook API. Following <a href=\"https://staythefuckhome.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">#StayTheFuckHome</a>, I have a bit more time on my hands, and I was logging the traffic of some of my installed applications.\nI do not think app analytics is a problem at all. For companies and developers, it is essential to know and understand about their app usage. However, this data is often sent together with unique identifiers, like the advertiser id or unique device id, to 3rd parties like Facebook. These 3rd parties can accumulate for each unique identifier which apps are installed and how they are used. In the best case, this information is (ab)used just for targeted advertisements. In the following, the apps I monitored are divided into The Good, The Bad, and The Ugly.</p>\n<h2 id=\"the-good\" style=\"position:relative;\"><a href=\"#the-good\" aria-label=\"the good permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Good</h2>\n<ul>\n<li>Uber</li>\n<li>Twitter</li>\n<li>Dropbox</li>\n</ul>\n<p>All 3 of them did not show any traffic connection to 3rd parties for sending app analytics. All of them have set up their in-house analytics for reporting app usage to their APIs.</p>\n<h2 id=\"the-bad\" style=\"position:relative;\"><a href=\"#the-bad\" aria-label=\"the bad permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Bad</h2>\n<h3 id=\"ryanair\" style=\"position:relative;\"><a href=\"#ryanair\" aria-label=\"ryanair permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ryanair</h3>\n<p>The Ryanair app uses the Facebook SDK. It means the <code class=\"language-text\">advertiser_id</code> is sent together with the iOS version, screen resolution, network operator, timezone, and country-code for any app event. The POST request to <code class=\"language-text\">https://graph.facebook.com/v4.0/1756342261282366/activities</code> contains following data (shortened personal identifiers removed, yes I still use an iPhone 5s)</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"advertiser_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"00AD3E04-CF5D-4B6A-9B06-xxxxxxxxxxx\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"advertiser_tracking_enabled\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"anon_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"XZ9308FFB6-7AEB-4077-B70D-xxxxxxxxxxx\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"application_tracking_enabled\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"event\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"CUSTOM_APP_EVENTS\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"extinfo\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[\\\"i2\\\",\\\"com.ryanair.cheapflights\\\",\\\"227\\\",\\\"3.79.3\\\",\\\"12.4.5\\\",\\\"iPhone6,1\\\",\\\"en_PT\\\",\\\"WET\\\",\\\"NOS\\\",320,568,\\\"2.00\\\",2,15,2,\\\"Europe\\\\/Lisbon\\\"]\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"format\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"json\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"include_headers\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"false\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"sdk\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ios\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>However the Ryanair app also sends similar data to <a href=\"https://www.swrve.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Swrve</a> for every activity. A typical POST request to <code class=\"language-text\">https://6177.eu-api.swrve.com/1/batch</code> contains the same data as the request to facebook and additionally a <code class=\"language-text\">unique_device_id</code> and a <code class=\"language-text\">user</code> identifier.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"data\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"app.launched\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"event\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"attributes\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">\"Swrve.permission.ios.push_bg_refresh\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"authorized\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"swrve.device_dpi\"</span><span class=\"token operator\">:</span> <span class=\"token number\">326</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"swrve.device_height\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1136</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"swrve.device_name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"iPhone6,1\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"swrve.device_region\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"PT\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"swrve.device_width\"</span><span class=\"token operator\">:</span> <span class=\"token number\">640</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"swrve.os\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"iOS\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"swrve.os_version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"12.4.5\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"swrve.sim_operator.iso_country_code\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pt\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"swrve.sim_operator.name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"NOS\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"swrve.timezone_name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Europe/Lisbon\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"unique_device_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"3FFD84D2-70BE-49C2-B40F-XXXXXXXXXXXX\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"user\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"8C5F8FAF-8126-41F2-8D95-XXXXXXXXXXXX\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"airbnb\" style=\"position:relative;\"><a href=\"#airbnb\" aria-label=\"airbnb permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AirBnB</h3>\n<p>The Airbnb app sends to Facebook the same information as the Ryanair app. Additionally AirBnB also sends data to <a href=\"https://www.swift.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Sift</a>.\nThe requests to <code class=\"language-text\">https://api3.siftscience.com/</code> contain the same data as the requests to Facebook. But, they contain additional information like the battery level, magnetic field sensor data, user id, and the IP address, which is personally identifiable information (PII).</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"installation_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"3BD7943F-D927-4B2B-8827-xxxxxxxxxxxx\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"ios_app_state\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"application_state\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ui_application_state_active\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"battery_level\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0.6200000047683716</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"battery_state\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ui_device_battery_state_unplugged\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"device_orientation\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ui_device_orientation_portrait\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"heading\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"raw_magnetic_field_x\"</span><span class=\"token operator\">:</span> <span class=\"token number\">-33.402767181396484</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"raw_magnetic_field_y\"</span><span class=\"token operator\">:</span> <span class=\"token number\">-166.6410369873047</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"raw_magnetic_field_z\"</span><span class=\"token operator\">:</span> <span class=\"token number\">82.95677185058594</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"true_heading\"</span><span class=\"token operator\">:</span> <span class=\"token number\">163.66522216796875</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"network_addresses\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">\"10.214.186.xxx\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"fe80::86e:932a:29de:xxxx\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"2001:8a0:65a3:6300:1809:8f6f:faa1:xxxx\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"2001:8a0:65a3:6300:d14e:d203:4289:xxxx\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"192.168.1.xx\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"fe80::78a6:15ff:fea4:xxx\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"fe80::7d1:2f87:88b1:xxxx\"</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"user_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"C9uYLW9Rf1LHRsAwnBUCxxxx\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"the-ugly\" style=\"position:relative;\"><a href=\"#the-ugly\" aria-label=\"the ugly permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Ugly</h2>\n<h3 id=\"glovo\" style=\"position:relative;\"><a href=\"#glovo\" aria-label=\"glovo permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Glovo</h3>\n<p>The delivery app also sends the same data to Facebook as the other monitored apps. Besides that, the Glovo app also sends data to <a href=\"https://www.braze.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Braze</a>. The POST requests to <code class=\"language-text\">https://sdk.fra-01.braze.eu/api/v3/data</code> contain the same data as the data sent to Facebook and a unique <code class=\"language-text\">user_ID</code>. Some requests also contain the location together with the time - also PII.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"device_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"5E1AAFC9-7889-4093-A3AF-xxxxxxxxxxxx\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"events\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"data\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">\"alt_accuracy\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"altitude\"</span><span class=\"token operator\">:</span> <span class=\"token number\">58.13918685913086</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"latitude\"</span><span class=\"token operator\">:</span> <span class=\"token number\">48.858518</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"ll_accuracy\"</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"longitude\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2.2922603</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"lr\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"session_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"7F8AF4F8-F5D8-43E0-A85C-xxxxxxxxxxxxx\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"time\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1585420004.069</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"user_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"8349xxx\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Glovo also sends data to <a href=\"https://www.ravelin.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Ravelin</a> with a POST request to <code class=\"language-text\">https://api.ravelin.net/v2/fingerprint</code> containing the phone model, language, operator, all installed fonts and the gps location.</p>\n<h3 id=\"bolt\" style=\"position:relative;\"><a href=\"#bolt\" aria-label=\"bolt permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bolt</h3>\n<p>Bolt, formerly Taxify, is a transportation platform similar to Uber. Again data is sent to Facebook, as the other apps do. However, Bolt also sends data to <a href=\"https://www.segment.io\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Segment</a> that includes a user id, email, and phone number. The POST requests to <code class=\"language-text\">https://api.segment.io/v1/batch</code> hold the following data:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"anonymousId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"8738A73E-34DF-47CE-8971-xxxxxxxxxxxx\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"context\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"device\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"adTrackingEnabled\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"advertisingId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"00AD3E04-CF5D-4B6A-9B06-xxxxxxxxxxxx\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"BED9A70E-667A-40C3-9113-xxxxxxxxxxxx\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"manufacturer\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Apple\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"model\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"iPhone6,1\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ios\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"traits\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"anonymousId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"8738A73E-34DF-47CE-8971-xxxxxxxxxxxx\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"country\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pt\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"device_name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"iPhone5S\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"facebook_connected\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"platform\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"iOS\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"platform_version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"12.4.5\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"userId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"client-38675xxx\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"user_email\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"xxx@gmail.com\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"user_first_name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Swen\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"user_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"38675xxx\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"user_last_name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"xxx\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"user_phone\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"+351915xxxxxx\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Additionally Bolt sends data to <a href=\"https://clevertap.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">CleverTap </a> containing similar information, as the requests to Facebook.</p>\n<h3 id=\"zomato\" style=\"position:relative;\"><a href=\"#zomato\" aria-label=\"zomato permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Zomato</h3>\n<p>Zomato is an app to discover restaurants and for food delivery. Zomato makes no exception in sending data to Facebook. However, Zomato also sends data to <a href=\"https://clevertap.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">CleverTap </a>. The POST requests to <code class=\"language-text\">https://wzrkt.com/</code> contain pretty much the same data as the request to Facebook. But, also the full customer name, email address, and phone number are included. Here is an example of the request:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"af\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"Carrier\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"NOS\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"Make\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Apple\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"Model\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"iPhone6,1\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"OS\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"iOS\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"OS Version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"12.4.5\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"Radio\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"LTE\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"cc\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pt\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"mt_ifa\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"00ad3e04cf5d4b6a9b0629exxxxxxxxx\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"mt_ifv\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"86c6b057b8844a3ba0ebe3bxxxxxxxxx\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"useIP\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"wifi\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"profile\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"Carrier\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"NOS\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"Email\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"xxx@gmail.com\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"Name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Swen XXX\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"Phone\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"cc\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pt\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"ct_optout\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"tz\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Europe/Lisbon\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>With the implementation of GDPR in 2018, most websites started to have mandatory consent for visitors, explaining how personal data is saved and used.\nUnfortunately, mobile applications do not seem to show or ask for any consent. Most apps send analytics data to Facebook, although this option can be <a href=\"https://developers.facebook.com/docs/app-events/gdpr-compliance/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">switched off</a> in the SDK.\nMy biggest worry are The Ugly applications, which send personal information like full name, email, phone number, and location to Segment, CleverTap, or Ravelin. Segment advertises on the landing page <em>Segment is a customer data platform that makes good data accessible for all teams</em>. Who is going to have access to my personal information, maybe an external marketing team that also gets access to the Segment account? But the biggest concern is the same as for Facebook: There was never the option in any of the apps to give explicit consent. Since Segment and CleverTap are based in the US and both are probably used to create automatic profiles for advertisement, I believe that an explicit GDPR consent is necessary - But I am also not a lawyer ;)</p>\n<h2 id=\"update-3-april-2020\" style=\"position:relative;\"><a href=\"#update-3-april-2020\" aria-label=\"update 3 april 2020 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Update 3 April 2020</h2>\n<h3 id=\"houseparty\" style=\"position:relative;\"><a href=\"#houseparty\" aria-label=\"houseparty permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Houseparty</h3>\n<p>Houseparty received some <a href=\"https://www.forbes.com/sites/thomasbrewster/2020/03/23/houseparty-is-the-hit-coronavirus-lockdown-app-safe/#6ad6fb3355b2\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">bad press</a> about leaking passwords, which until this date is not proofed. Because of the popularity of the app, and by request in a Slack Channel, I also analyzed the app traffic of Houseparty.\nHouseparty does use the Facebook SDK, but no data is sent to the API containing user or device data.<br>\nAfter login, the app sends analytics data to <a href=\"https://www.instabug.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Instabug</a> containing the username, email, first name, and unique identifiers. Houseparty also sends data to  <a href=\"https://www.segment.io\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Segment</a>. These requests contain a lot of personal data (shortened to most essential):</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>   <span class=\"token property\">\"anonymousId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"EBB66C97-2120-4B5D-B949-B358B701XXXX\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"context\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"device\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"adTrackingEnabled\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"advertisingId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"00AD3E04-CF5D-4B6A-9B06-XXXXXXXXXXXX\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"60035683-C533-4A34-8541-XXXXXXXXXXXX\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"manufacturer\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Apple\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"model\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"iPhone6,1\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"locale\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"en-PT\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"network\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"carrier\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"NOS\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"cellular\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"wifi\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"timezone\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Europe/Lisbon\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"traits\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"email\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"xxx@gmail.com\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Swen\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"p_camera\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"allowed\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"p_contacts\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"denied\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"p_location\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"denied\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"p_microphone\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"allowed\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"p_notifications\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"denied\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"phone_verified\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"profile_photo\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"token\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"F07vbLVWMhOUHnz7tFEGcmu4J8Hhhh4XTGxFagRmMKHbXrVvGaUT0ECLvUXXXXXX\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"user_dob\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"19XX-XX-XXT00:00:00.000Z\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"username\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sknzl\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"properties\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"battery_percent_remaining\"</span><span class=\"token operator\">:</span> <span class=\"token number\">-100</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"charge_state\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"unknown\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"connection_type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"wifi\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"device_orientation\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"portrait\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"headphones\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"none\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"sneaking\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"userId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"5e837e625069b82c502cXXXX\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This request contains different phone settings, email, username, first name, day of birth and a <code class=\"language-text\">token</code>. This token got my special attention because it is the same token the application receives after a successful login and is used to authenticate the requests to the Houseparty API. Anybody with knowledge of this token, this means everybody that has access to the Segment data, can communicate with the API on behalf of the user account without knowing the username and password. The token is only refreshed on a password reset and is deleted on logout. The email of the user can only be changed by confirming with the existing password. Therefore it is not possible to take over an account completely, even by knowing the authentication token.</p>","fields":{"slug":"/posts/monitoring-traffic-of-ios-apps/","tagSlugs":["/tag/privacy/"]},"frontmatter":{"date":"2020-03-30","description":"I was monitoring the traffic of my iOS apps to see where my personal data is sent to.","tags":["Privacy"],"title":"Monitoring traffic of iOS apps","socialImage":"/media/monitoring/mitm.png"}}},"pageContext":{"slug":"/posts/monitoring-traffic-of-ios-apps/"}}}