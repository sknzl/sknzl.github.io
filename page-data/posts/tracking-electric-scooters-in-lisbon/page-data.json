{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/tracking-electric-scooters-in-lisbon/","result":{"data":{"markdownRemark":{"id":"4fd93beb-3a23-5ccd-b482-a8ee46974a4e","html":"<ul>\n<li><a href=\"#why?-and-how?\">Why and How?</a></li>\n<li><a href=\"#results-of-analyzing-the-data\">Results of analyzing the data</a></li>\n</ul>\n<h2 id=\"why-and-how\"><a href=\"#why-and-how\" aria-label=\"why and how permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why? and How?</h2>\n<p>E-scooters started to clutter the streets, and unfortunately also the sidewalks, of Lisbon.\nFor a test ride after a late dinner, I installed the application of Circ (formerly Flash). The disappointment was huge after the scooter did not pick up more speed than I could go myself on foot. Something was certainly off with the battery, engine or power circuit and I was not happy about the 1 Euro spent for unlocking it.</p>\n<p>The next day I decided to have a closer look at their iOS application. I used <a href=\"https://mitmproxy.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">mitmproxy</a> to intercept the traffic between my phone and the Circ API while using the app. One of the most interesting requests happened when I scrolled on the map so see scooters to rent around me.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">GET https://api.goflash.com/api/Mobile/Scooters</code></pre></div>\n<p>The request requires the following query parameters </p>\n<ul>\n<li><code class=\"language-text\">userLatitude</code> and <code class=\"language-text\">userLongitude</code> define the user location.</li>\n<li><code class=\"language-text\">latitude</code> and <code class=\"language-text\">longitude</code> give the center around which the scooters are searched.</li>\n<li><code class=\"language-text\">latitudeDelta</code> and <code class=\"language-text\">longitudeDelta</code> define the search area around the center.</li>\n</ul>\n<p>A typical response (shortened to the important information looks like the following</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"Result\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"OK\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"Data\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"Scooters\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"idScooter\"</span><span class=\"token operator\">:</span> <span class=\"token number\">15171</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"idCity\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"LIS\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"ScooterCode\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"549858\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"idScooterState\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"DEPLOYED_FOR_RENTAL\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"PowerPercent\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"40%\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"RemainderRange\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"15 km\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"ScooterModel\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Circ B1\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"txtRentalPrice\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1€ to unlock + 0.25€ per minute\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"Locked\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"location\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"latitude\"</span><span class=\"token operator\">:</span> <span class=\"token number\">38.702908</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"longitude\"</span><span class=\"token operator\">:</span> <span class=\"token number\">-9.161877</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>With this information it is possible to follow the GPS coordinates of a given scooter via <code class=\"language-text\">idScooter</code> throughout the day and see where it was going. The scooter only has to be found! To not deal with rate limitation of the API endpoint <code class=\"language-text\">Scooters</code> (15 requests per minute) an authentication header with a bearer token can be send with the request. The bearer token can be obtained from the endpoint</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">GET https://api.goflash.com/api/Mobile/UserHello</code></pre></div>\n<p>with the query parameter <code class=\"language-text\">deviceKey</code>, which can be easily obtained with <code class=\"language-text\">mitmproxy</code> while using the app (more details <a href=\"https://github.com/sknzl/django_scooter\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a>).</p>\n<p>For retrieving all scooters in Lisbon, a box of approximately 5km x 5km is created and then discretized in 10 x 10 grid points, which are used for <code class=\"language-text\">latitude</code> and <code class=\"language-text\">longitude</code> in the API request. The grid discretization is relatively small since I did not know what is the maximum value for <code class=\"language-text\">latitudeDelta</code> and <code class=\"language-text\">longitudeDelta</code>. The value for both coordinate deltas was set to <code class=\"language-text\">0.05</code>, which corresponds to the whole grid size. In the case, the API allows such a big search area, scooters of several grid points are retrieved in one request. That means duplicates need to be taken care of.</p>\n<p>To collect the data I created a Django application with Celery to record the positions of all scooters every 20 minutes. Why Django? Because it provides out of the box an admin interface to display the created models and their data. By adding a few lines of JavaScript to the admin panel, I was able to verify the logged scooter locations on a map.</p>\n<p>The repository with the full Django project can be found <a href=\"https://github.com/sknzl/django_scooter\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.748403575989784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACK0lEQVQoz52SW08TURRG538ikcQX45/wzTcviIJKfDK0BZSYEIJGEmKCLdCAmtLCtPR25nJm2k5nWlqmt+nyUJsYEoyXSVa+M3vvrLMnGe3OQoJ7S3HuLsaZm48z8yjBrccJZv6C2ScJ5p6ucXt+TeU6s6qm1duXuEGXZneAfzkgCH/ln/Cns1fZ7PYpGDbaoBcyGg4gGjHo92Ac/eS/njFaGIb0ej2GwyHdy0v6/QFRFBGNxyr/kfFU2Ol0JsJWqzWRj1XjRtRFv+1N0Uaj0WTVqxsmm46iGz9FTV9/v8a0qo5asxPg+Q26nRa+5+A1qnieyUXgqI1VryFxGw6y2UDqGdKVFkkJX2xI2uNJ7tkdsn6WoOOhuX6VckXHNvKIqo40z5DGCbZlYFklHEPVDneR9SqF1RjxoxaxXEg8G/ImF7FyCpuFBociRc2toLXbHo60kArLsjDNEtI6p1QuYpk5iu4pYvcDwecdMu+3ieuwpke81UMl6nNSNmhKHcc8p+6q3+ai7SuJULIK0hZKVsS18jgiizAz6EpeffkQ58F9tnIeK0q4kR9xVPYQhoErvqrZA2pSCRVarRmoDU3qVgG/VsW0DfKGoGoWMeqS3EGar7F3fNorsl6B1TykRI+i9MnaFwhZo2bpBG6erm+iJUtNYimdnW9nbB3rLCerPEs6LKUEyweCF0nBUtphIe2xmLR5npK82rdYVPl6X7Cxn2M7/Z3Nwwwfj8/4AVBXaA8IIFFjAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/73957660df1f92944af1f0d963d60604/01472/admin_dashboard.webp 240w,\n/static/73957660df1f92944af1f0d963d60604/222bd/admin_dashboard.webp 480w,\n/static/73957660df1f92944af1f0d963d60604/620b9/admin_dashboard.webp 960w,\n/static/73957660df1f92944af1f0d963d60604/28063/admin_dashboard.webp 1440w,\n/static/73957660df1f92944af1f0d963d60604/31a16/admin_dashboard.webp 1566w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/73957660df1f92944af1f0d963d60604/0783d/admin_dashboard.png 240w,\n/static/73957660df1f92944af1f0d963d60604/782f4/admin_dashboard.png 480w,\n/static/73957660df1f92944af1f0d963d60604/f570d/admin_dashboard.png 960w,\n/static/73957660df1f92944af1f0d963d60604/8d0ff/admin_dashboard.png 1440w,\n/static/73957660df1f92944af1f0d963d60604/7d252/admin_dashboard.png 1566w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/73957660df1f92944af1f0d963d60604/f570d/admin_dashboard.png\"\n          alt=\"admin_dashboard.png\"\n          title=\"admin_dashboard.png\"\n          loading=\"lazy\"\n        />\n      </picture>\n    </span></p>\n<div style=\"font-style: italic;\" align=\"center\">\nThe admin panel of the Django application showing the logged position for one scooter.\n</div>\n<p><em>Note: I was also trying to retrieve similar information for Lime scooters. However, the Lime API does not return a unique Scooter ID. For every request the returned scooter IDs are randomized (and internally they map them to their real IDs), which makes it impossible to track individual scooters.</em></p>\n<h2 id=\"results-of-analyzing-the-data\"><a href=\"#results-of-analyzing-the-data\" aria-label=\"results of analyzing the data permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Results of analyzing the data</h2>\n<p>The data was collected from the 18th of August for 111 days every 20 minutes. The data was processed and analyzed using a Jupyter notebook and the libraries <a href=\"https://pandas.pydata.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">pandas</a>, <a href=\"https://matplotlib.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">matplotlib</a> and <a href=\"https://github.com/python-visualization/folium\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">folium</a>.</p>\n<h3 id=\"finding-the-gps-accuracy\"><a href=\"#finding-the-gps-accuracy\" aria-label=\"finding the gps accuracy permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Finding the GPS accuracy.</h3>\n<p>First, the data was analyzed by removing all scooter trips that were &#x3C;20m in travel distance, due to the GPS accuracy of IoT devices and scooters being pushed around for fun. The results were rather odd:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACdElEQVQ4y3WS6U/bQBDF+f8/9ktRJXogSDgTEAktGLUcUQihQSSuKUdIA77tdQl27PiI/TprrqbHSqN5uzv709PsTIFWkiQYDAZQFAWqqkKWZRiGkWdN0/Jzrnk2DDOveap90kEQIMsyTHHgeDyG53mwbRuMsTx+15Nhw3FsmCbDzQ3LteM4iOP4Bcgduq5LRSYsy/pv2ASTZYKRVhQLksSB/I2NMAyJxIHkbsyB5JADubMJyNOe7hz9Ft9EC6piQtMZAZ0cyGuiKCJjBMyGHlKy6w2HMKlvfzkzdJj9HvRWE9ZJHeLBBeTTDhTpHGK9C2fAcodJEhOcA30fCdl13X84ZA7M6ytoQgXqp3WYXzbRrjRwK2zjplpBu7gFJvfIvYUoDukNB7r3GBNw6HuTPeSaA68uoJbmoawtwq4WIC4L6K2uor9UxOm7NRgChdimT4morxxIsDSJaDw8GgHu0ALjwSjuHGiShMb0Os4XyjibK2HvzQ6EV9u4LK5ALGzAKM9C2/mIcDSitnEg/2ak6F4HUDUagTsG3fqJ0xMLP1QXvdZ3dIuLkIobaM5UsTct4HJ5HcczFTTe70AtF2DsbiEhh3xNZWmWf3fvzIbYknEhaehU6uisCDj+3EWvuglt6S3klXnopQ+QV4vQy3PozhfQmS2h9XoB58sVxKMQWQ7MHjyyvobrehvGSQvscBdmo4Z+7RhOcx/m4T7sZg1W4wD2EWUKdrQP5ytpurutHSEO40eHj0D+Kb7vIhgF8IIR7mmM/GCIIIofNDngOQgj+NT3AU2F5wcYUm0QjpCm40kgz3/qfP+sU2Rpmu/zM9IvNXh+9wtXSrvwrqwiMgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/a08374aaf55fad723af8d1d890e68b94/01472/trips_and_kilometeres_20m_limit.webp 240w,\n/static/a08374aaf55fad723af8d1d890e68b94/222bd/trips_and_kilometeres_20m_limit.webp 480w,\n/static/a08374aaf55fad723af8d1d890e68b94/620b9/trips_and_kilometeres_20m_limit.webp 960w,\n/static/a08374aaf55fad723af8d1d890e68b94/65a12/trips_and_kilometeres_20m_limit.webp 1080w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/a08374aaf55fad723af8d1d890e68b94/0783d/trips_and_kilometeres_20m_limit.png 240w,\n/static/a08374aaf55fad723af8d1d890e68b94/782f4/trips_and_kilometeres_20m_limit.png 480w,\n/static/a08374aaf55fad723af8d1d890e68b94/f570d/trips_and_kilometeres_20m_limit.png 960w,\n/static/a08374aaf55fad723af8d1d890e68b94/e9c61/trips_and_kilometeres_20m_limit.png 1080w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/a08374aaf55fad723af8d1d890e68b94/f570d/trips_and_kilometeres_20m_limit.png\"\n          alt=\"trips_and_kilometeres_20m_limit.png\"\n          title=\"trips_and_kilometeres_20m_limit.png\"\n          loading=\"lazy\"\n        />\n      </picture>\n    </span></p>\n<div style=\"font-style: italic;\" align=\"center\">\nFigure 1: Total trips and kilometers by day with trips shorter than 20m removed from the data set.\n</div>\n<p>The number of trips in October increases ~4x compared to the period before. On the other side, the kilometers per day are not increasing by the same factor. That means that most of the additional trips are very short.\nI was running the same analysis, but removing all trips with distances shorter than 100m. The relation between the number of trips and kilometers per day looks more coherent now. I cannot conclude why from October on the number of very short trips (&#x3C;100m) has strongly increased. I can only assume the GPS positioning of the IoT boards started to be less accurate (updates?, power-saving?) or Circ started a marketing campaign that would give away free unlocks.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACT0lEQVQ4y42SbW/TMBSF9///AhISTBPbQDBpol9AiL6ytaPboCkgtnVrXhrHSZc2b02b5HDskgnQPmDJ9fWt89xzj70Djs1mgzAMYVkWbNuGaZpwXVevjuPovIrV6rpCn6nP1nGWZaiqCjsKmOc5FosFpJTwfR9BEOj1sRkEktOHEAGm00DHQTBHkiQoy3ILVOQoirQqz/MenUJ4LOhR6Ta2LA+GoQQI/i+xXq8VicCyQL5aaYXqQ6Wynn/u1UfzuYQxknBsj1YwNpRCdcanwphQKqziGAWBSyoUQjyAHlOogKMhfTPFFjiSGqiK5fmKMRVWJJeU+z/AYO7j65lJoAvbEoRbzMnfLa+4KmC0xDpNCVw+tPgvTF2E8i8MJcYX9rZlqhx93gJVy2ma0F/VMttFVcCZpTSaCj1Bo2k21fgEiZmL4XEft+MJzImDk8Y3dBs/Mb3zMD43CWRRIbFhl3GsFKprRoEfNNiZ0fjFPavPcN66weTuHjeDEUZPD2C87aC718O7Jz2c7zZw8cHAxVBgHrLwPEDKd6hvuSq3yOvhHb40x/jeM3C518Dlszfov/qEq4NDuK+f42b/BaYHu7g+fInZ0R6L7OPssInLoyauu0P9lvXDVj9qyImNq/c9zDot+CdNiNMublt9BIM2RI+5QQfytA2/34Z32kHQb8E7acNufsRtZ4B1vtGcB2AcR0iyGCmvP0ozLKIYCY1O8zUWfFpJttK5dJUjoe/hMuK5lHHGXIaiKP4GqrVuX8f1vo6rkvtS73WOcX2uHir+BUvVyHDU7kBaAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/d4bf438cddb25d20f4cdef034390da28/01472/trips_and_kilometeres_100m_limit.webp 240w,\n/static/d4bf438cddb25d20f4cdef034390da28/222bd/trips_and_kilometeres_100m_limit.webp 480w,\n/static/d4bf438cddb25d20f4cdef034390da28/620b9/trips_and_kilometeres_100m_limit.webp 960w,\n/static/d4bf438cddb25d20f4cdef034390da28/65a12/trips_and_kilometeres_100m_limit.webp 1080w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/d4bf438cddb25d20f4cdef034390da28/0783d/trips_and_kilometeres_100m_limit.png 240w,\n/static/d4bf438cddb25d20f4cdef034390da28/782f4/trips_and_kilometeres_100m_limit.png 480w,\n/static/d4bf438cddb25d20f4cdef034390da28/f570d/trips_and_kilometeres_100m_limit.png 960w,\n/static/d4bf438cddb25d20f4cdef034390da28/e9c61/trips_and_kilometeres_100m_limit.png 1080w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/d4bf438cddb25d20f4cdef034390da28/f570d/trips_and_kilometeres_100m_limit.png\"\n          alt=\"trips_and_kilometeres_100m_limit.png\"\n          title=\"trips_and_kilometeres_100m_limit.png\"\n          loading=\"lazy\"\n        />\n      </picture>\n    </span></p>\n<div style=\"font-style: italic;\" align=\"center\">\nFigure 2: Total trips and kilometers by day with trips shorter than 100m removed from the data set.\n</div>\n<p>In the following, I will continue by removing trips with less than 100m distance traveled from the data, since the ratio <code class=\"language-text\">trips/kilometers</code> should stay constant over time.</p>\n<p>The remaining data includes:</p>\n<ul>\n<li>1793 scooters</li>\n<li>34671 scooter trips recorded</li>\n<li>63322 km of scooter movement</li>\n</ul>\n<p>The trip distance distribution in figure 3 shows, that most trips (~50%) are shorter than 1km. Less than 30% of all trips of the data set are longer than 2km.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACEklEQVQ4y41TTWvUUBTtj/AHuBSE7kVciLgVat2qSLXubPGjoFKKiGLVnf0BxWXRlYgrBXHhQhSXk3Ym318zSSfJTCaTSSY53vsymdYyFh+c3HfzuOedezlvDrTyPEeapojDEHEvgqqqaDabkCQJiqKI2Gg00Gq1IMuyOOfc8zwkSYLBYICyLJkKc7zJsgzdKIJybwna6w04QQjXceC67hTtdvuvnGHbNkzTFLEoioqwVhj0+9BuXIKxfgdWN4RlGrAs61gwEUeHLp8SMhkrDIlQvXUZ+pO7gtCmmw8XcTy6n0kY0dx4flEcQ725AH1jFdZ+d0p4nLKZhP1eTwyWW1aXiPDpfVhJCntG8VGimYRBECAdjRD1SeHtK9BXrsL49gWW3KoUTYr+W+FwOBQtB9S6tnIN2vlT0BbOVgXcuq4LtQJ2He1qP4uQP5yEYQRt9Tq0i/PQFs9B39qE+esH7DiBTZaxXYZbRc4d9x+E5MN8PEaXWleWF6GcOQnlwmnI8yegri1D//wJxu+fMHYlGM09ig2YexJMGolJ6s2J4ilh7fCY3N7Z3oL37AG8l4/RebWOzouH8DcfwX/zHP67t/A/7MDf2UaH4H18D+/7V3i6in2vc/BS+MOJAA5WOUGP5sseZXv16TWNKBfn4xxlNkJJPi6ow5pnqrD6UaAsKmAS2fQZuSCjQh5N3drhy2syXn8AjoazuMo90UwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/4c56492f1b49e4876a4800c92564b144/01472/trips_distance_distribution.webp 240w,\n/static/4c56492f1b49e4876a4800c92564b144/222bd/trips_distance_distribution.webp 480w,\n/static/4c56492f1b49e4876a4800c92564b144/620b9/trips_distance_distribution.webp 960w,\n/static/4c56492f1b49e4876a4800c92564b144/65a12/trips_distance_distribution.webp 1080w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/4c56492f1b49e4876a4800c92564b144/0783d/trips_distance_distribution.png 240w,\n/static/4c56492f1b49e4876a4800c92564b144/782f4/trips_distance_distribution.png 480w,\n/static/4c56492f1b49e4876a4800c92564b144/f570d/trips_distance_distribution.png 960w,\n/static/4c56492f1b49e4876a4800c92564b144/e9c61/trips_distance_distribution.png 1080w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/4c56492f1b49e4876a4800c92564b144/f570d/trips_distance_distribution.png\"\n          alt=\"trips_distance_distribution.png\"\n          title=\"trips_distance_distribution.png\"\n          loading=\"lazy\"\n        />\n      </picture>\n    </span></p>\n<div style=\"font-style: italic;\" align=\"center\">\nFigure 3: Trip distance distribution.\n</div>\n<p>The distribution in figure 4 shows that 70% of the recorded scooters did not drive more than 45km during the data set recording.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACKElEQVQ4y5WTyW/TQBTG+5+AkCqEBOKARIsQSxHiUAEXtgNiu4A4gOgBRFluIMpyo0cKXEDcuPE/gEBcEImTYHscexLboXEcJ85i++PNeGmqFiEifX7P45lfvnnzZipJEojfaDSC316FVqtBqVRQo1itVlEqlWSuKArK5bLMVVWFruvym+M4CMMQOWcqT7xuAHXhMsyVl2hS3rAsNJtNqUajUeT5ez5m0TyhOI5ToHjEBBVA/eI8jOUl8FEMy2DF5H9JwAvgaDiUljsCeO002OJ1mN++wKrXwTknWVnkcnGeT2odsN/vo9frwe92od26BLZ/G9jCFVi2U0D+y+FgMJDAju9DF8AD0zAomlUF3DTBhavM2WYONwBDchgEAXy/C/3mBbCjO8GO7wU7Owfz5w9wciq3n7nZzPUGYJe2Kx1K4C6w+T1gJ2aolp/BHTeVONFJ8N+ACSWidbxOJ93ysd1gJ2dJM9DPHQG7cR7G+xU6dQO87YG7Am7LP8hLsQ6IvA89D+rVU9D2bYU2twPaoe1QD05Dm92Sjp05DPbuFerfv6JO9TXVXzAJZJopdM1hBgzoYOy3y3Ae3Yb99B6cpUW4z+6j9eIhWs8fwH1yF+7jO3De0JwPr2F/+ginQjeFnLZav9duiniIFymRi0bP1AkHaAc9eP0QqxTbFNtUGtEZMV3ViOofjceIogg5p3CYjRCJUEks45gWicbPNSTQmADx5JpiaTr2B7odoxhuoVXRAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/4228d9a59d7f6303bcf29af48b5d00af/01472/scooter_kilometrage_distribution.webp 240w,\n/static/4228d9a59d7f6303bcf29af48b5d00af/222bd/scooter_kilometrage_distribution.webp 480w,\n/static/4228d9a59d7f6303bcf29af48b5d00af/620b9/scooter_kilometrage_distribution.webp 960w,\n/static/4228d9a59d7f6303bcf29af48b5d00af/65a12/scooter_kilometrage_distribution.webp 1080w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/4228d9a59d7f6303bcf29af48b5d00af/0783d/scooter_kilometrage_distribution.png 240w,\n/static/4228d9a59d7f6303bcf29af48b5d00af/782f4/scooter_kilometrage_distribution.png 480w,\n/static/4228d9a59d7f6303bcf29af48b5d00af/f570d/scooter_kilometrage_distribution.png 960w,\n/static/4228d9a59d7f6303bcf29af48b5d00af/e9c61/scooter_kilometrage_distribution.png 1080w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/4228d9a59d7f6303bcf29af48b5d00af/f570d/scooter_kilometrage_distribution.png\"\n          alt=\"scooter_kilometrage_distribution.png\"\n          title=\"scooter_kilometrage_distribution.png\"\n          loading=\"lazy\"\n        />\n      </picture>\n    </span></p>\n<div style=\"font-style: italic;\" align=\"center\">\nFigure 4: Scooter kilometrage distribution.\n</div>\n<p>From the number of new scooters added in figure 5 it can be estimated, how many scooters need to be replaced due to technical problems and/or vandalism. The spike of new scooters added just before November can be explained by the start of the WebSummit on the 4th of November.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAABxUlEQVQ4y61Ty27bQAzM//9Ijz3k0KKHBkXQxiiaIGjaOo6syHIiaR9SautlW4A8HW4kxcrjVgEUl+RyOMvlHu33e8jXNA02mw1WqxU8z3MSRRHm8znCMHR2EAS4mc2cz/d9F99ut6jrGj3OkfzatsV6vYZSCsYYZFnmJE3TsYjPaKR3S2QPD7DWDjmC4QBlIezyPIfW2gVFH66ftIUmK33rQxPMdDEBHgDlmAJWFMWQ/KYwUccxdHALQ8a9fwQoPSjLEgXlvwEKWEGWfT9eHrXTA6Dv1qZrzRiQR65qHjuOXH/cxtfYHQIugrcZ1lWFoqqRLxdQvL2+8gCwDGF65mJH91CX56PCI8Bmt8Ou3WN1dQElyZIULmA4Isamj8dL4sdkstJJguTzBxZUQ3FL/wCIbiD/nk8Qn51CTX9zLOZQvgd1/QfJ1SXUjPonC86mDjB6/44x7pMxEvYs2PaDve+Q8xtu/nQMS2Bz8R3m2xfYHxPYryfUZ7CTU6T0Z941zMlHJxmLZvd3yKa/nhj2T6ZkH0s+Ibn1NZ9fyd7KfNZyaZyCiraMV0nfZtfwImsUfF0591Zl8RJQdL8+tJ/Hnf3cd5DzD1vg1J2nNTPDAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/6f64926c793981e1ba61d9daededa243/01472/new_scooters.webp 240w,\n/static/6f64926c793981e1ba61d9daededa243/222bd/new_scooters.webp 480w,\n/static/6f64926c793981e1ba61d9daededa243/620b9/new_scooters.webp 960w,\n/static/6f64926c793981e1ba61d9daededa243/65a12/new_scooters.webp 1080w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/6f64926c793981e1ba61d9daededa243/0783d/new_scooters.png 240w,\n/static/6f64926c793981e1ba61d9daededa243/782f4/new_scooters.png 480w,\n/static/6f64926c793981e1ba61d9daededa243/f570d/new_scooters.png 960w,\n/static/6f64926c793981e1ba61d9daededa243/e9c61/new_scooters.png 1080w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/6f64926c793981e1ba61d9daededa243/f570d/new_scooters.png\"\n          alt=\"new_scooters.png\"\n          title=\"new_scooters.png\"\n          loading=\"lazy\"\n        />\n      </picture>\n    </span></p>\n<div style=\"font-style: italic;\" align=\"center\">\nFigure 5: Number of new scooters added by day.\n</div>\n<p>The final result is a heatmap to show the most common places where trips with scooters are started or finished, accumulated for all recorded days.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.93598862019915%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACuUlEQVQ4y21TyU8TURyetiyVloSC0NQLJI0aOUgMGk+eSIyJmvQ/AA4kGhPLuSSNxjPhxoFTPSAH0BZKgbZqSynOUO06dKPTQthKacGUyKaHzzevUkvKJG+WN+/3vd+3PCaTyeDk5ASnp6coFos4ODgAy7LY3NzE+noGu7u7ODz8CY/HA0EQ0N/XB4ZhIJVK6bNqiIuSyST29/eRz+eRTqcRj8cQiUSQSgk4Pj4moDvg+TD41RgGXrykhc3NzVcDZrNZspiH3++noGJHGxvrWPb6EAiEcHR0RP4nsGD3wclG8FT3mBYqlAqoVKpqwL29PZydndHOAoEAobmBYDADjzcKL5dEPJGBy8Xihz+Hz84VPHqoLRfX19dXd5rL5YhGh1QzkT7LcnAvBvDVxcNiF7C8nCYbBAkYh+/8Du7cv3dJw7q6OgoqkUhKgGJXsVgM0WiU6BYm1IMQ0lksOHmYPkUwaUnBsxjGykocc04/JDJ5FU25XI6WlpbSJmJnogGhUAgOh4MMO+ZsHkzOJjBqm8boBx/mHWskBb/x6rWBAtTU1kImk9H3cmdk6PX6EmXRDIvFApvNhpmZaZg/zmPKmcY78zjem1NYTfyCdd6HNk17mW5lbHQ6HSYmJrC1tQVGdDUcDsNut9P8ud0ufHGy+MYVYVtKErensMgKuNnZfUm7i86Gh4dReTHiTYxNPl+gE+fnf+BYimF81o23b/QYGniA27farwxzY2MjRIaFQoHGbXt7G4zRaITVagXHcTCbzTAMGfHk+TNcV2suFUsrtLoA1mq1MJlMaGhogFqthlKpFOdL1leKK44bGg16e/tp1iQSYkRNTZW7tcQcVVNT+bu7m8iiUCjQ2tqKnp4eDA4OwmAwYGxsjBzHNXokm/4V/Kdb2ritTY2RkRHc7eoisbmG9o4OeL1e/AVqRV0NjkabwwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/9c1730a5abe56f4fc055d2ae18ecad22/01472/heatmap.webp 240w,\n/static/9c1730a5abe56f4fc055d2ae18ecad22/222bd/heatmap.webp 480w,\n/static/9c1730a5abe56f4fc055d2ae18ecad22/620b9/heatmap.webp 960w,\n/static/9c1730a5abe56f4fc055d2ae18ecad22/824f7/heatmap.webp 1406w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/9c1730a5abe56f4fc055d2ae18ecad22/0783d/heatmap.png 240w,\n/static/9c1730a5abe56f4fc055d2ae18ecad22/782f4/heatmap.png 480w,\n/static/9c1730a5abe56f4fc055d2ae18ecad22/f570d/heatmap.png 960w,\n/static/9c1730a5abe56f4fc055d2ae18ecad22/be72e/heatmap.png 1406w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/9c1730a5abe56f4fc055d2ae18ecad22/f570d/heatmap.png\"\n          alt=\"heatmap.png\"\n          title=\"heatmap.png\"\n          loading=\"lazy\"\n        />\n      </picture>\n    </span></p>\n<div style=\"font-style: italic;\" align=\"center\">\n<a href='/media/scooter/heat_map.html' target=\"_blank\"> Click here for the interactive version of the map.</a>\n</div>\n<p>The heatmap is also available showing the start and end location of the scooters day by day. This figure visualizes how the number of scooters in the center is getting bigger over time.\n<img src=\"/1c4c7905ede4945b432c4802c89cbc08/heatmap_time.gif\" alt=\"heatmap_time.gif\"></p>\n<div style=\"font-style: italic;\" align=\"center\">\n<a href='/media/scooter/map_animated.html' target=\"_blank\"> Click here for the interactive version of the map.</a>\n</div>\n<h2 id=\"final-words\"><a href=\"#final-words\" aria-label=\"final words permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Final words</h2>\n<p>This was just a superficial analysis of the recorded data. There could be more analysis on certain spikes in trips/kilometers and new scooters and relate them to local events. Also, the influence of weather could be analyzed.\nThis data could be also very useful for city halls to understand the impact and usage of e-scooters in their city and adjust urban planning accordingly.\nAssuming an average speed for a trip the total usage time of the scooters could be calculated to retrieve the revenue of the renting companies.</p>\n<h3 id=\"what-to-improve\"><a href=\"#what-to-improve\" aria-label=\"what to improve permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What to improve</h3>\n<p>The time resolution of the data is low. For a second attempt, I would retrieve data from the API every minute. Also, the scooter “displacement” overnight was not taken into account since I can’t distinguish it from a ride. Probably I could clean up the data by removing all trips that were longer than usual during the night time.\nIt would be also interesting to monitor different cities and compare the results.</p>","fields":{"slug":"/posts/tracking-electric-scooters-in-lisbon/","tagSlugs":["/tag/python/","/tag/data/"]},"frontmatter":{"date":"2019-12-09","description":"An article how I collected the GPS data of electric scooters in Lisbon and the results.","tags":["Python","Data"],"title":"Tracking electric scooters in Lisbon","socialImage":"/media/scooter/heatmap.png"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/tracking-electric-scooters-in-lisbon/"}}}